<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TubeWranglerr</title>
    <link rel="stylesheet" href="/css/style.css" />
  </head>
  <body>
    <div class="app-shell">
      <aside id="sidebar" class="sidebar">
        <div class="sidebar-header">
          <button id="sidebar-toggle" class="icon-btn">‚â°</button>
          <h1>TubeWranglerr</h1>
        </div>
        <nav>
          <a href="#/" data-route>üìä Dashboard</a>
          <a href="#/channels" data-route>üì∫ Canais</a>
          <a href="#/streams" data-route>üì° Eventos</a>
          <a href="#/playlists" data-route>üéµ Playlists</a>
          <a href="#/settings" data-route>‚öôÔ∏è Configura√ß√µes</a>
          <div class="submenu">
            <a href="#/settings/api" data-route>‚Ä¢ API & Credenciais</a>
            <a href="#/settings/cookies" data-route>‚Ä¢ Cookies</a>
            <a href="#/settings/scheduler" data-route>‚Ä¢ Agendador</a>
            <a href="#/settings/content" data-route>‚Ä¢ Conte√∫do & Filtros</a>
            <a href="#/settings/titles" data-route>‚Ä¢ Formato de T√≠tulos</a>
            <a href="#/settings/retention" data-route>‚Ä¢ Reten√ß√£o (VOD)</a>
            <a href="#/settings/media" data-route>‚Ä¢ M√≠dia & Placeholders</a>
            <a href="#/settings/cache" data-route>‚Ä¢ Cache</a>
            <a href="#/settings/player" data-route>‚Ä¢ Smart Player</a>
            <a href="#/settings/tech" data-route>‚Ä¢ T√©cnico</a>
          </div>
          <a href="#/logs" data-route>üßæ Logs</a>
        </nav>
      </aside>
      <div id="sidebar-resizer" class="sidebar-resizer"></div>
      <main class="content">
        <header class="topbar">
          <div id="status-badges" class="badges"></div>
          <button id="logout-btn" class="danger-btn">Sair</button>
        </header>
        <section id="app"><div class="card" id="loading-card"><h3>‚è≥ Carregando...</h3><p id="load-debug" style="font-size:0.8rem;opacity:0.6">Iniciando m√≥dulos...</p></div></section>
      </main>
    </div>
    <script>
      // Debug: catch all unhandled errors before modules load
      window.__debugLog = [];
      window.onerror = function(msg, src, line, col, err) {
        var info = 'JS Error: ' + msg + ' at ' + (src||'?') + ':' + line + ':' + col;
        window.__debugLog.push(info);
        var el = document.getElementById('load-debug');
        if (el) el.innerHTML += '<br style="color:#fca5a5">' + info;
        console.error('[onerror]', msg, src, line, col, err);
      };
      window.addEventListener('unhandledrejection', function(e) {
        var info = 'Unhandled rejection: ' + (e.reason && e.reason.message || e.reason || 'unknown');
        window.__debugLog.push(info);
        var el = document.getElementById('load-debug');
        if (el) el.innerHTML += '<br style="color:#fca5a5">' + info;
        console.error('[unhandledrejection]', e.reason);
      });
    </script>
    <script type="module" src="/js/app.js"></script>
    <script nomodule>
      document.getElementById('app').innerHTML = '<div class="card"><h3>Navegador incompat√≠vel</h3><p>Seu navegador n√£o suporta ES Modules. Use Chrome, Firefox ou Edge atualizado.</p></div>';
    </script>
  </body>
</html>
